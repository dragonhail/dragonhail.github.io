---
title: 카프카
cascade:
  type: docs
---
### 사용 이유

### 사용 사례
- 실시간 수집 정보 대쉬보드
- 순서가 중요한 주문 처리
  - 배달 주문 취소
- 카프카로 실시간 로그 전송 후 ElasticSearch에서 분석

### 브로커
- 카프카는 여러 개의 브로커(노드)가 클러스터를 구성
- 브로커수는 땟목 알고리즘에의 해 홀수개를 추천, 최수 3개 권장

### 토픽
- 브로커는 여러 개의 토픽으로 구성
- 토픽은 여러 개의 파티션으로 구성

### 파티션
- 파티션 내에서는 순서가 보장됨
- 오프셋으로 순서를 보장
- 브로커의 토픽의 파티션은 다른 브로커에도 복제가 됨
- 파티션에는 리더와 팔로워가 존재
- 브로커가 3개 있고 브로커 1의 토픽1의 파티션1이 리더
  - 브로커2와 브로커3에는 토픽1의 복제본이 각각 존재
  - 브로커2.토픽1.파티션1와 브로커3.토픽1.파티션1은 팔로워 파티션으로 브로커1.토픽1.파티션1을 복제
  - 브로커1.토픽1.파티션2는 팔로워가 되며 브로커2.토픽1.파티션2가 리더가 됨
  - 위와 같은 방식으로 리더와 팔로워가 브로커에 나누어져 있음
- 파티션이 나눠져 있어 프로듀서, 컨슈머가 병렬 처리가 가능

### ISR(In-Sync Replicas)

### LAG

### 병렬 처리

### 뗏목 알고리즘(Raft Algorithm)

### 옵션
- 프로듀서 옵션
  - linger.ms
  - compression
  - batchsize
  - ack
- 컨슈머 옵션
  - fetch.min.bytes
- 브로커 옵션
  - min.insync.replicas
  - queued.max.requests

### Producer

### Consumer

### Docker Compose로 설치


### 여러 대의 노드를 활용해 클러스터 구성